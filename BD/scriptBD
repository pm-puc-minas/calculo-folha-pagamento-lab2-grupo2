USE folha;

CREATE TABLE IF NOT EXISTS usuario (
  id INT PRIMARY KEY AUTO_INCREMENT,
  login VARCHAR(70) NOT NULL UNIQUE,
  senha VARCHAR(70) NOT NULL,
  permissao INT NOT NULL
);

CREATE TABLE IF NOT EXISTS funcionario (
  id INT PRIMARY KEY AUTO_INCREMENT,
  nome VARCHAR(70) NOT NULL,
  cpf VARCHAR(14) NOT NULL UNIQUE,
  cargo VARCHAR(70),
  dependentes INT NOT NULL,
  salario_base DECIMAL(10,2) NOT NULL,
  salario_bruto DECIMAL(10,2) NOT NULL,
  descontoINSS DECIMAL(10,2) NOT NULL,
  apto_periculosidade BOOLEAN NOT NULL,
  grau_insalubridade INT NOT NULL,
  vale_transporte BOOLEAN NOT NULL,
  valor_vt DECIMAL(10,2) NOT NULL,
  vale_alimentacao BOOLEAN NOT NULL,
  valor_va DECIMAL(10,2) NOT NULL,
  usuario_id INT NOT NULL UNIQUE,
  FOREIGN KEY (usuario_id) REFERENCES usuario(id)
);

CREATE TABLE IF NOT EXISTS folha_pagamento (
  id INT PRIMARY KEY AUTO_INCREMENT,
  mes_referencia INT NOT NULL,
  ano_referencia INT NOT NULL,
  salario_bruto DECIMAL(10,2) NOT NULL,
  total_adicionais DECIMAL(10,2) NOT NULL,
  total_beneficios DECIMAL(10,2) NOT NULL,
  total_descontos DECIMAL(10,2) NOT NULL,
  salario_liquido DECIMAL(10,2) NOT NULL,
  funcionario_id INT NOT NULL,
  FOREIGN KEY (funcionario_id) REFERENCES funcionario(id)
);
